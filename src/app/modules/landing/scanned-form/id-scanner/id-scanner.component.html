<div class="w-full h-full flex flex-col bg-red-600 justify-center relative"> <!-- Offset -->
    <div class="bg-gray-500 w-full flex flex-col items-center"> <!-- Range -->

        <!-- Title Card & Back Button-->
        <div class="absolute z-99 top-0 h-14 sm:h-20 bg-white shadow-md p-4 flex flex-row items-between w-full"> 
            <a (click)="closeIdCamera('back');" class="flex justify-center w-8 items-center"><mat-icon class="text-black text-2xl sm:text-6xl">arrow_back</mat-icon></a>
            <h2 class="col-span-4 text-lg font-bold w-full text-center sm:text-4xl">Register SIM Card</h2>
        </div>

        <!-- Instruction-->
        <div class="absolute z-20 top-14 sm:top-20 grid grid-cols-6 gap-4 p-6 sm:gap-8 sm:p-12 bg-gray-800/80">
            <mat-icon [svgIcon]="'feather:cameraform'" class="col-span-1 w-auto h-auto sm:m-4"></mat-icon>
            <span class="col-span-5 text-white text-lg sm:text-4xl my-auto">Please place your <a class="font-bold text-[#ff0078]">ID</a> within the frame to ensure greater success.</span>
        </div>

        <!-- Camera Area -->
        <div class="h-screen w-screen p-0 flex justify-center items-center">
            <video #idVideo autoplay playsinline class="border-[#ff0078] border-dotted border-4 sm:border-8 h-50 w-80 sm:w-160 sm:h-100 rounded-xl sm:rounded-3xl object-cover"></video>
        </div>

        <!-- Capture Button -->
        <div class="absolute z-20 bg-gray-800/80 flex justify-center items-center bottom-0 w-full h-auto p-6 rounded-t-3xl sm:p-12">
            <button (click)="captureIdImage();" mat-flat-button class="bg-white w-20 h-20 rounded-full sm:min-h-20 sm:w-40">
                <mat-icon svgIcon="mat_outline:camera" class="icon-size-10 sm:icon-size-20"></mat-icon>
            </button>
        </div>

        <!-- Preview Prompt -->
         @if (idPreviewOpened) {
            <div class="absolute z-30 h-screen w-screen flex justify-center items-center bg-gray-800/80">
                <div class="absolute w-auto h-auto rounded-xl sm:rounded-3xl justify-center p-4 sm:w-3/4 text-center">
                    <h1 class="text-3xl sm:text-6xl font-bold">Photo Preview</h1>
                    
                    <!-- Captured Image Here -->
                    <div class="bg-red-600 w-auto h-auto">
                        <img [src]="idImageData" alt="Captured Image">
                    </div>
                    
                    <!-- Supposedly Close the Popup -->
                    <button mat-flat-button class="w-full h-auto bg-[#ff0078] text-white rounded-3xl mt-4 text-lg sm:text-4xl sm:p-8" (click)="closeIdPreview();">Retake</button>
                    
                    <!-- Close the Camera -->
                    <button mat-flat-button class="w-full h-auto bg-[#ff0078] text-white rounded-3xl mt-4 text-lg sm:text-4xl sm:p-8" (click)="closeIdCamera();">Continue</button>
                
                </div>
            </div>
        }

        <!-- Error Prompt -->
        @if (errorPrompt) {
            <div class="absolute z-30 h-screen w-screen flex justify-center items-center">
                <div class="absolute w-auto h-auto rounded-xl sm:rounded-3xl bg-white justify-center p-4 text-center">
                    <h1 class="text-3xl sm:text-6xl font-bold ">Something's Wrong !</h1>
                    <p class="text-md sm:text-xl pt-2 sm:pt-4">{{ errorMessage }}</p>
                    <button mat-flat-button class="w-full h-auto bg-[#ff0078] text-white rounded-3xl mt-4 text-lg sm:text-4xl sm:p-8" (click)="closeIdCamera();">Retry</button>
                </div>
            </div>
        }
         
        <!-- Loading Prompt-->
        @if (isLoading) {
            <div class="absolute z-99 inset-0 bg-black/80 flex justify-center items-center px-5">
                <mat-progress-spinner mode="indeterminate" class="w-1/2 h-1/2 text-[#ff0078]"></mat-progress-spinner>
            </div>
        }
        
    </div>
</div>